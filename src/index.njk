---
layout: base.njk
title: Home
---

<header class="hero">
  <img src="{{ homeData.heroImageUrl }}" class="hero-image supabase-image" alt="I am lying shirtless on a bed, gazing upward" />
  <div class="overlay">
    <h1 class="hero-title">Collected Without Commentary.</h1>
    <p class="hero-subtitle">Quiet Stills From a Place That Remains Off. Unposed. Undisturbed.</p>
  </div>
</header>

<main>
  <section class="home-collections">
    <h2>Latest Collections</h2>
    <ul class="collection-list">
      {% for c in signedPhotoCollections %}
      <li class="collection-item">
        <a href="/collections/{{ c.slug }}/" class="collection-link">
          <div class="thumbnail-wrapper">
            <div class="image-skeleton"></div>
            <img data-path="{{ c.cover_image_path }}" src="{{ c.signed_cover_image_url }}"
              class="collection-thumb supabase-image" alt="{{ c.title }}" {% if loop.index0 < 3 %}loading="eager" {%
              else %}loading="lazy" {% endif %} />
          </div>
          <span>{{ c.title }}</span>
        </a>
      </li>
      {% endfor %}
    </ul>
  </section>

  {% set publicPosts = supabasePosts
  | selectattr("access_level", "equalto", "public")
  | selectattr("image_url")
  | selectattr("image_url", "contains", "/object/sign/") %}


  <section class="home-latest-post">
    <h2>Latest Posts</h2>

    <p>Loaded {{ publicSupabasePosts | length }} posts</p>

    <div class="post-grid">
      {% for post in publicSupabasePosts %}
      <article class="post-entry">
        <img src="{{ post.signed_cover_image_url }}" alt="{{ post.title }}" class="post-thumb" loading="lazy">
        <p>{{ post.title }}</p>
      </article>
      {% endfor %}
    </div>

    <p><a href="/posts">View all posts â†’</a></p>
  </section>
</main>

<script>
  window.SUPABASE_CONFIG = JSON.parse('{{ "" | supabaseConfig | safe }}');
</script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js" defer></script>
<script src="/assets/auth.js" defer></script>
<script src="/assets/home.js" defer></script>