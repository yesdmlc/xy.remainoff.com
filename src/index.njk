---
layout: base.njk
title: Home
---

<header class="hero">
  <img
    src="https://images.unsplash.com/photo-1563688139-bb5832571d4b?q=80&w=2340&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
    alt="Hero Image" />
  <div class="overlay">
    <h1 class="hero-title">Lonely doesnâ€™t mean lifeless.</h1>
    <p class="hero-subtitle">This is my quietâ€”documented in motion, muscle, and memory.</p>
  </div>
</header>

<main>
  <section class="home-collections">
    <h2>Latest Collections</h2>
    <ul class="collection-list">
      {% for c in signedPhotoCollections %}
      <li>
        <a href="/collections/{{ c.slug }}/">
          <img src="{{ c.cover_image_url }}" alt="{{ c.title }}" class="collection-thumb" loading="lazy">
          <span>{{ c.title }}</span>
        </a>
      </li>
      {% endfor %}
    </ul>
  </section>

  {% set publicPosts = supabasePosts
  | selectattr("access_level", "equalto", "public")
  | selectattr("image_url")
  | selectattr("image_url", "contains", "/object/sign/") %}


  <section class="home-latest-post">
  <h2>Latest Posts</h2>

  <p>Loaded {{ publicSupabasePosts | length }} posts</p>

  <div class="post-grid">
    {% for post in publicSupabasePosts %}
    <article class="post-entry">
      <img src="{{ post.image_url }}" alt="{{ post.title }}" class="post-thumb" loading="lazy">
      <p>{{ post.title }}</p>
    </article>
    {% endfor %}
  </div>

  <p><a href="/posts">View all posts â†’</a></p>
</section>
</main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js" defer></script>
<script src="/assets/auth.js" defer></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const images = document.querySelectorAll("img");

    images.forEach(img => {
      img.addEventListener("error", () => {
        console.warn("ðŸš« Image failed to load:", img.src);
      });

      img.addEventListener("load", () => {
        console.log("âœ… Image loaded:", img.src);
      });
    });
  });
</script>